# OpenRouter é…ç½®æŒ‡å—

## âœ… å·²å®Œæˆé…ç½®

ä½ çš„ OpenRouter API key å·²ç»é…ç½®å®Œæˆ! ç°åœ¨å¯ä»¥é€šè¿‡ä¸€ä¸ª API è®¿é—®å¤šä¸ªé¡¶çº§ LLMã€‚

### é…ç½®çš„æ¨¡å‹

é€šè¿‡ OpenRouter,ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨:

1. **Claude Sonnet 4.5** (`claude-sonnet`)
   - ç”¨é€”: é«˜è´¨é‡å°è¯´ç”Ÿæˆ,å¤æ‚æ¨ç†
   - æˆæœ¬: ~$3/1M tokens

2. **DeepSeek V3** (`deepseek`)  â­ æ¨è
   - ç”¨é€”: é«˜æ€§ä»·æ¯”,ä¸­æ–‡å‹å¥½
   - æˆæœ¬: ~$0.27/1M tokens (ä¾¿å®œ10å€!)
   - ç‰¹ç‚¹: ä¸­æ–‡æ•ˆæœä¼˜ç§€,é€‚åˆç„å¹»å°è¯´

3. **Qwen 2.5 72B** (`qwen`)
   - ç”¨é€”: é«˜æ€§ä»·æ¯”,ä¸­æ–‡ä¼˜åŒ–
   - æˆæœ¬: ~$0.35/1M tokens
   - ç‰¹ç‚¹: é˜¿é‡Œé€šä¹‰åƒé—®,ä¸­æ–‡ç†è§£å¥½

4. **Claude Haiku** (`claude-haiku`)
   - ç”¨é€”: å¿«é€Ÿå“åº”,ç®€å•ä»»åŠ¡
   - æˆæœ¬: ~$0.8/1M tokens

5. **GPT-4 Turbo** (`gpt-4`)
   - ç”¨é€”: å¤‡ç”¨æ¨¡å‹
   - æˆæœ¬: ~$10/1M tokens

### é™çº§ç­–ç•¥

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹é¡ºåºå°è¯•:
1. Claude Sonnet (é¦–é€‰,è´¨é‡æœ€é«˜)
2. DeepSeek (å¤‡é€‰,æ€§ä»·æ¯”é«˜)
3. Qwen (å¤‡é€‰,ä¸­æ–‡å¥½)
4. Claude Haiku (å¤‡é€‰,å¿«é€Ÿ)
5. GPT-4 (æœ€å,ç¨³å®š)

---

## å¿«é€Ÿæµ‹è¯•

### 1. åŸºç¡€æµ‹è¯•

```bash
# ç¡®ä¿åœ¨è™šæ‹Ÿç¯å¢ƒä¸­
source venv/bin/activate

# å®‰è£…ä¾èµ–(å¦‚æœè¿˜æ²¡å®‰è£…)
pip install -r requirements.txt

# è¿è¡Œ OpenRouter æµ‹è¯•
python test_openrouter.py
```

è¿™ä¸ªæµ‹è¯•è„šæœ¬ä¼š:
- âœ… éªŒè¯ API key é…ç½®
- âœ… æµ‹è¯•å¤šä¸ªæ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›
- âœ… æµ‹è¯•ç»“æ„åŒ–è¾“å‡º(JSON Schema)
- âœ… æµ‹è¯•æ‰¹é‡ç”Ÿæˆ

### 2. é¢„æœŸè¾“å‡º

æˆåŠŸçš„è¯,ä½ ä¼šçœ‹åˆ°:

```
============================================================
æµ‹è¯• OpenRouter é›†æˆ
============================================================
âœ… API Key å·²é…ç½® (å‰10ä½: sk-or-v1-9...)
âœ… LiteLLM å®¢æˆ·ç«¯åˆå§‹åŒ–æˆåŠŸ

å¯ç”¨æ¨¡å‹ (5 ä¸ª):
  - claude-sonnet
  - claude-haiku
  - gpt-4
  - deepseek
  - qwen

============================================================
æµ‹è¯•æ¨¡å‹ç”Ÿæˆ
============================================================

ğŸ”„ æµ‹è¯•æ¨¡å‹: claude-sonnet
æç¤º: ç”¨ä¸€å¥è¯ä»‹ç»ç§‘å¹»å°è¯´çš„é­…åŠ›ã€‚
âœ… ç”ŸæˆæˆåŠŸ:
   ç§‘å¹»å°è¯´é€šè¿‡æƒ³è±¡æœªæ¥ç§‘æŠ€...

ğŸ”„ æµ‹è¯•æ¨¡å‹: deepseek
æç¤º: ç”¨ä¸€å¥è¯ä»‹ç»ç„å¹»å°è¯´çš„ç‰¹ç‚¹ã€‚
âœ… ç”ŸæˆæˆåŠŸ:
   ç„å¹»å°è¯´ä»¥ä¿®ä»™ã€å¼‚èƒ½ä¸ºæ ¸å¿ƒ...

...
```

---

## æˆæœ¬ä¼˜åŒ–å»ºè®®

### åœºæ™¯ 1: ç”Ÿæˆ 100 ç« ç§‘å¹»å°è¯´ (æ¯ç«  3000 å­—)

**ä½¿ç”¨ Claude Sonnet 4.5:**
- æˆæœ¬: ~$150

**ä½¿ç”¨ DeepSeek V3:**
- æˆæœ¬: ~$15 (ä¾¿å®œ 10 å€!)
- è´¨é‡: å¯¹ä¸­æ–‡å†…å®¹éå¸¸å¥½

### åœºæ™¯ 2: æ··åˆä½¿ç”¨(æ¨è)

```python
# ç« èŠ‚å¤§çº²å’Œå…³é”®æƒ…èŠ‚: Claude Sonnet
outline = await client.generate(
    prompt="ç”Ÿæˆç¬¬1ç« å¤§çº²...",
    model="claude-sonnet"
)

# å…·ä½“åœºæ™¯æå†™: DeepSeek
scene = await client.generate(
    prompt=f"æ ¹æ®å¤§çº² {outline} å†™è¯¦ç»†åœºæ™¯...",
    model="deepseek"
)
```

**æˆæœ¬**: ~$50 (èŠ‚çœ 67%)
**è´¨é‡**: å‡ ä¹æ— æŸ

---

## æ¨¡å‹é€‰æ‹©æŒ‡å—

### ç§‘å¹»å°è¯´

| ä»»åŠ¡ | æ¨èæ¨¡å‹ | åŸå›  |
|------|---------|------|
| è®¾å®šæ„å»º | claude-sonnet | é€»è¾‘ä¸¥å¯†,æ¨ç†èƒ½åŠ›å¼º |
| æŠ€æœ¯ç»†èŠ‚ | claude-sonnet | ç§‘å­¦çŸ¥è¯†ä¸°å¯Œ |
| åœºæ™¯æå†™ | deepseek/qwen | æ€§ä»·æ¯”é«˜,ä¸­æ–‡æµç•… |
| å¯¹è¯ç”Ÿæˆ | deepseek | å¿«é€Ÿ,è‡ªç„¶ |

### ç„å¹»å°è¯´

| ä»»åŠ¡ | æ¨èæ¨¡å‹ | åŸå›  |
|------|---------|------|
| å¢ƒç•Œä½“ç³» | claude-sonnet | é€»è¾‘è‡ªæ´½ |
| æˆ˜æ–—åœºæ™¯ | deepseek | ä¸­æ–‡æå†™ç”ŸåŠ¨,ä¾¿å®œ |
| ä¿®ç‚¼è¿‡ç¨‹ | qwen | ä¸­æ–‡ç†è§£å¥½ |
| æ—¥å¸¸å‰§æƒ… | deepseek | æ€§ä»·æ¯”æœ€é«˜ |

---

## é…ç½®æ–‡ä»¶è¯´æ˜

### .env (å·²é…ç½®)

```bash
OPENROUTER_API_KEY=sk-or-v1-9bfd...  # âœ… å·²è®¾ç½®
```

### config/litellm_config.yaml (å·²ä¼˜åŒ–)

å…³é”®é…ç½®:
- **5 ä¸ªæ¨¡å‹**: Claude Sonnet/Haiku, DeepSeek, Qwen, GPT-4
- **æ™ºèƒ½é™çº§**: è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨æ¨¡å‹
- **é‡è¯•æœºåˆ¶**: 3 æ¬¡é‡è¯•,æŒ‡æ•°é€€é¿
- **è¶…æ—¶ä¿æŠ¤**: 120 ç§’è¶…æ—¶

---

## å¸¸è§é—®é¢˜

### Q1: API è°ƒç”¨å¤±è´¥?

**æ£€æŸ¥æ¸…å•:**
1. ç¡®è®¤ `.env` ä¸­çš„ API key æ­£ç¡®
2. æ£€æŸ¥ OpenRouter è´¦æˆ·ä½™é¢
3. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
python test_openrouter.py
```

### Q2: å¦‚ä½•æŸ¥çœ‹ OpenRouter ä½¿ç”¨æƒ…å†µ?

è®¿é—®: https://openrouter.ai/activity

### Q3: å¦‚ä½•å……å€¼?

è®¿é—®: https://openrouter.ai/credits

å»ºè®®å……å€¼ $10-20 å¼€å§‹æµ‹è¯•ã€‚

### Q4: æ¨¡å‹å“åº”å¤ªæ…¢?

```yaml
# ä¿®æ”¹ config/litellm_config.yaml
router_settings:
  routing_strategy: latency-based  # æ”¹ä¸ºå»¶è¿Ÿä¼˜å…ˆ
```

### Q5: æƒ³åªä½¿ç”¨æŸä¸ªç‰¹å®šæ¨¡å‹?

```python
# ç›´æ¥æŒ‡å®šæ¨¡å‹
result = await client.generate(
    prompt="...",
    model="deepseek"  # å¼ºåˆ¶ä½¿ç”¨ DeepSeek
)
```

---

## è¿›é˜¶é…ç½®

### 1. æ·»åŠ æ›´å¤šæ¨¡å‹

ç¼–è¾‘ `config/litellm_config.yaml`:

```yaml
model_list:
  # æ·»åŠ  Gemini Pro
  - model_name: gemini
    litellm_params:
      model: openrouter/google/gemini-pro
      api_key: ${OPENROUTER_API_KEY}
      api_base: https://openrouter.ai/api/v1
      max_tokens: 4000
```

### 2. è®¾ç½®æˆæœ¬é™åˆ¶

```yaml
litellm_settings:
  max_budget: 50  # æœ€å¤šèŠ±è´¹ $50
  budget_duration: 1d  # æ¯å¤©
```

### 3. å¯ç”¨è¯¦ç»†æ—¥å¿—(è°ƒè¯•)

```yaml
litellm_settings:
  set_verbose: true  # æŸ¥çœ‹æ‰€æœ‰ API è°ƒç”¨
```

---

## ä¸‹ä¸€æ­¥

âœ… OpenRouter å·²é…ç½®å®Œæˆ
âœ… å¤šä¸ªæ¨¡å‹å¯ç”¨
âœ… æˆæœ¬ä¼˜åŒ–ç­–ç•¥å·²è®¾ç½®

**ç°åœ¨å¯ä»¥:**

1. **è¿è¡Œæµ‹è¯•**: `python test_openrouter.py`
2. **å¼€å§‹å¼€å‘**: å‚è€ƒ `NEXT_STEPS.md`
3. **ç”Ÿæˆå°è¯´**: ä½¿ç”¨ Global Director

**æˆæœ¬ä¼°ç®—**:
- æµ‹è¯• (10æ¬¡è°ƒç”¨): ~$0.1
- ç”Ÿæˆ 1 ç«  (DeepSeek): ~$0.01
- ç”Ÿæˆ 100 ç«  (æ··åˆ): ~$50

ç¥ä½ å¼€å‘é¡ºåˆ©! ğŸš€
