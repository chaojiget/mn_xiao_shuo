# 🎮 AI小说生成器 - 完整体验流程指南

**生成时间**: 2025-11-02
**版本**: v0.6.1
**服务状态**: ✅ 已启动

---

## 🚀 服务状态确认

### ✅ 后端服务
```
地址: http://localhost:8000
状态: ✅ 运行中 (PID: 21721)
模型: DeepSeek V3
```

### ✅ 前端服务
```
地址: http://localhost:3000
状态: ✅ 运行中 (PID: 61175)
框架: Next.js 14
```

---

## 📋 完整体验流程

### 🎯 体验路线图

```
1. 欢迎页面 (3秒)
   ↓
2. 统一工作台
   ↓
3. 功能体验
   ├── 📖 小说创作
   ├── 🗺️ 世界管理
   ├── 💬 AI聊天
   └── 🎮 游戏模式
```

---

## 第一步：访问欢迎页面

### 操作
```
在浏览器中打开: http://localhost:3000
```

### 预期效果
✅ 看到精美的欢迎页面
- 蓝紫渐变背景
- 大大的Logo
- "AI 小说生成器" 标题
- 4个功能卡片（小说创作、对话模式、游戏模式、世界管理）
- 6个核心特性展示
- "进入工作台" 按钮
- "3秒后自动跳转..." 提示

### 体验点
1. **观察设计**：注意渐变背景和卡片悬停效果
2. **等待跳转**：倒计时3秒自动进入工作台
3. **或者点击**：直接点击"进入工作台"按钮

**截图时机**: 欢迎页面展示完整时

---

## 第二步：进入统一工作台

### 操作
```
等待自动跳转或点击按钮
地址变为: http://localhost:3000/workspace
```

### 预期效果
✅ 看到统一工作台界面

**左侧边栏**:
- 📖 AI小说生成器 v0.6.1（Logo + 版本）
- [✕] 折叠按钮
- 5个导航菜单:
  - 📖 创作（默认选中，蓝色高亮）
  - 💬 聊天
  - 🎮 游戏
  - 🗺️ 世界
  - ⚙️ 设置
- 底部状态:
  - 后端: DeepSeek V3
  - 模式: 混合叙事

**顶部栏**:
- 标题: "创作"
- 描述: "小说生成与管理"
- [帮助] 按钮

**主内容区**:
- 两个标签: [开始创作] [我的小说]
- 默认显示"开始创作"页面

### 体验点
1. **测试侧边栏折叠**:
   - 点击Logo右侧的 [✕] 按钮
   - 侧边栏收缩为图标模式（64px宽）
   - 鼠标悬停图标显示Tooltip
   - 点击 [☰] 按钮展开

2. **测试导航切换**:
   - 依次点击侧边栏的5个菜单项
   - 观察主内容区切换
   - 注意平滑过渡动画

**截图时机**: 工作台首屏

---

## 第三步：体验小说创作功能

### 当前位置
```
工作台 → 📖 创作（已选中）
```

### 操作流程

#### 3.1 查看"开始创作"页面
```
确保选中 [开始创作] 标签
```

**预期看到**:
- 小说生成表单
- 输入字段: 标题、类型、偏好等
- [生成] 按钮

**体验点**:
- 填写表单（可选，测试表单交互）
- 观察表单验证

#### 3.2 切换到"我的小说"
```
点击 [我的小说] 标签
```

**预期看到**:
- 小说列表（如果之前创建过）
- 或空状态提示

**截图时机**: 创作功能主界面

---

## 第四步：体验世界管理功能 ⭐ 核心功能

### 操作
```
点击侧边栏 → 🗺️ 世界
```

### 预期效果
✅ 主内容区切换为世界管理界面

**界面布局**（三栏）:

**左栏（世界结构）**:
- [选择世界] 下拉框
- [+ 创建新世界] 按钮
- 世界信息卡片

**中栏（内容区）**:
- 世界生成表单（未选择世界时）
- 或地点列表/详情

**右栏（派系、物品等）**:
- 三个标签页: 派系 | 物品 | 生物

### 详细体验流程

#### 4.1 生成测试世界

**操作**:
1. 填写表单:
   - 小说ID: `test-novel-001`
   - 主题: `dark survival`
   - 基调: `冷冽压抑`
   - 小说类型: 选择 `玄幻/仙侠`
   - 区域数量: `5`
   - 每区域地点数: `8`
   - 每地点POI数: `5`

2. 点击 [生成世界] 按钮

**预期效果**:
- ✅ 按钮显示 "生成中..."（加载动画）
- ⏱️ 等待30-60秒
- ✅ 生成成功提示
- ✅ 左侧显示世界树

**体验点**:
- 观察生成进度
- 检查是否有错误提示

#### 4.2 浏览世界树

**预期看到**:
```
📖 世界: 铁血大陆
  ├── 🗺️ 区域1: [生成的区域名]
  │   ├── 📍 地点1
  │   ├── 📍 地点2
  │   └── ...
  ├── 🗺️ 区域2: [生成的区域名]
  └── ...
```

**操作**:
1. 点击任意区域 → 展开地点列表
2. 点击任意地点 → 中栏显示地点详情

**截图时机**: 世界树完整展示

#### 4.3 细化地点 ⭐ 核心演示

**操作**:
1. 选择一个地点（例如第一个区域的第一个地点）
2. 中栏显示地点详情卡片
3. 点击 [⚡ 细化场景] 按钮

**预期效果**:
- ✅ 按钮显示 "细化中..."
- ⏱️ 等待20-40秒（执行4-Pass流水线）
- ✅ 细化完成

**查看结果**:

切换到不同标签页查看细化结果:

**📐 几何标签**:
```
• 螺旋楼梯断裂
• 顶层灯室残缺
• 被钉的木门
• 半埋的铜油罐
```

**👁️ 感官标签**:
```
visual: 海雾缠绕塔身
auditory: 风声如笛啸
olfactory: 咸湿腥味夹杂铁锈
tactile: 石墙潮湿,手摸过带盐霜
temperature: 海风冰冷刺骨
```

**🎯 可供性标签** ⭐ 重点:
```
[撬木门]
  前提: {"item": "撬棍"}
  ⚠️ 可能损坏门锁
  → 打开门,进入内部

[搜油罐]
  前提: 无
  ⚠️ 可能惊动附近生物
  → 获得灯油或其他物品

[攀爬破梯 ⚠️]
  前提: {"attribute": "力量 >= 3"}
  ⚠️ 高风险,可能跌落
  → 到达塔顶灯室
```

**📍 POI标签**:
- POI列表（待开发）

**📝 生成的叙事文本卡片**:
完整的场景描述（4-Pass合成）

**体验点**:
1. 检查每个Pass的输出质量
2. 验证可供性chips是否合理
3. 阅读叙事文本的画面感

**截图时机**:
- 细化前（detail_level = 0）
- 细化后（各个标签页内容）

#### 4.4 查看派系信息

**操作**:
1. 点击右栏 [👥 派系] 标签

**预期看到**:
```
📜 盐商公会
  目的: 控制海盐贸易
  势力: 3
  状态: active

📜 海盗联盟
  目的: 掠夺商船
  势力: 2
  状态: active
```

**截图时机**: 派系列表展示

---

## 第五步：体验游戏模式（占位符）

### 操作
```
点击侧边栏 → 🎮 游戏
```

### 预期效果
✅ 显示临时占位卡片:
```
游戏功能
单人跑团游戏功能正在整合中...
临时访问: /game
```

### 体验点
1. 点击 `/game` 链接
2. 在新标签页打开游戏页面
3. 体验单人跑团功能（独立页面）

**操作**（在 /game 页面）:
1. 点击 [开始游戏]
2. 等待初始化（加载初始场景）
3. 输入行动: `我环顾四周`
4. 点击 [执行]
5. 观察:
   - 叙事区显示LLM生成的文本
   - 右侧状态栏更新（HP、位置等）
   - 建议chips出现

**如果世界系统已生成**:
- 尝试输入: `我向北走进[细化过的地点名]`
- 观察是否自动触发场景细化
- 检查可供性chips是否自动添加到建议中

**截图时机**: 游戏运行中的完整界面

---

## 第六步：体验聊天模式（占位符）

### 操作
```
点击侧边栏 → 💬 聊天
```

### 预期效果
✅ 显示临时占位卡片:
```
聊天功能
AI对话辅助创作功能正在整合中...
临时访问: /chat
```

### 体验点
1. 点击 `/chat` 链接
2. 体验AI对话功能（独立页面）

---

## 第七步：测试侧边栏交互

### 快速切换测试

**操作序列**:
```
1. 📖 创作 → 查看小说生成器
2. 🗺️ 世界 → 查看世界树
3. 🎮 游戏 → 看到占位符
4. 💬 聊天 → 看到占位符
5. ⚙️ 设置 → 看到占位符
6. 返回 📖 创作 → 确认状态保持
```

**体验点**:
- 切换是否流畅（~50ms）
- 是否有过渡动画
- 状态是否保持（例如创作页面的输入内容）

### 折叠/展开测试

**操作**:
1. 点击 [✕] 折叠侧边栏
   - 侧边栏变窄（64px）
   - 仅显示图标
2. 鼠标悬停图标
   - 显示Tooltip提示
3. 点击 [☰] 展开
   - 侧边栏恢复（256px）

**截图时机**: 折叠状态

---

## 🎯 关键体验点总结

### 必须验证的功能

- [x] **欢迎页面**
  - [ ] 渐变背景渲染正常
  - [ ] 3秒自动跳转生效
  - [ ] 手动按钮可用

- [x] **统一工作台**
  - [ ] 侧边栏正常显示
  - [ ] 5个导航菜单可点击
  - [ ] 折叠/展开功能正常

- [x] **小说创作**
  - [ ] 表单可交互
  - [ ] 标签切换正常

- [x] **世界管理** ⭐ 核心
  - [ ] 世界生成成功（30-60秒）
  - [ ] 世界树正常渲染
  - [ ] 地点细化成功（20-40秒）
  - [ ] 4个Pass输出完整:
    - [ ] 几何特征
    - [ ] 感官节点
    - [ ] **可供性chips** ⭐
    - [ ] 叙事文本
  - [ ] 派系信息显示

- [x] **游戏模式**（独立页面）
  - [ ] 游戏初始化成功
  - [ ] 输入行动有响应
  - [ ] 状态栏更新
  - [ ] （可选）进入细化地点时自动触发细化

### 已知问题检查

1. **世界生成慢**: 30-60秒是正常的（5个区域 * 8个地点 = 40个地点生成）
2. **细化超时**: 如果超过60秒无响应，检查后端日志
3. **可供性为空**: 检查地点是否真的细化成功（detail_level应该=2）

---

## 📸 推荐截图清单

1. ✅ 欢迎页面（完整界面）
2. ✅ 工作台首屏（侧边栏展开）
3. ✅ 侧边栏折叠状态
4. ✅ 世界管理 - 生成表单
5. ✅ 世界管理 - 世界树展开
6. ✅ 世界管理 - 地点详情（细化前）
7. ⭐ **世界管理 - 地点详情（细化后，可供性chips）**
8. ✅ 世界管理 - 派系列表
9. ✅ 游戏模式运行中（独立页面）

---

## 🛠️ 故障排查

### 问题1: 后端API调用失败

**症状**: 世界生成/细化时报错

**检查**:
```bash
curl http://localhost:8000/health
```

**解决**:
```bash
# 重启后端
pkill -f "uvicorn main:app"
cd /Users/lijianyong/mn_xiao_shuo/web/backend
source ../../.venv/bin/activate
uvicorn main:app --reload --port 8000
```

### 问题2: 前端页面空白

**症状**: 打开网页但什么都不显示

**检查**:
```bash
# 查看前端日志
tail -f /tmp/frontend.log
```

**解决**:
```bash
# 重启前端
pkill -f "npm run dev"
cd /Users/lijianyong/mn_xiao_shuo/web/frontend
npm run dev
```

### 问题3: 世界生成/细化卡住

**症状**: 按钮一直显示"生成中..."

**检查后端日志**:
```bash
tail -f /tmp/backend.log
# 或检查运行目录的日志
```

**可能原因**:
1. LLM API超时
2. Token用完
3. 网络问题

**临时解决**: 刷新页面重试

---

## ⏰ 预计体验时间

- **快速浏览**: 5分钟
  - 欢迎页 → 工作台 → 各功能切换

- **完整体验**: 15-20分钟
  - 包含生成世界 + 细化地点

- **深度体验**: 30-40分钟
  - 包含游戏模式 + 多个地点细化 + 全部功能测试

---

## 🎊 体验完成检查清单

完成以下项目即可算完整体验：

- [ ] 看到欢迎页面并自动跳转
- [ ] 进入统一工作台
- [ ] 测试侧边栏折叠/展开
- [ ] 切换至少3个不同的功能Tab
- [ ] 在世界管理中生成一个测试世界
- [ ] 细化至少1个地点并查看可供性chips
- [ ] 访问独立的游戏页面并体验一轮游戏
- [ ] 拍摄至少5张关键截图

---

## 📝 反馈收集

体验过程中请记录：

1. **视觉体验**:
   - UI设计是否美观
   - 颜色搭配是否舒适
   - 动画是否流畅

2. **交互体验**:
   - 导航是否直观
   - 响应速度是否满意
   - 是否有卡顿

3. **功能体验**:
   - 世界生成质量如何
   - 可供性chips是否有用
   - 叙事文本是否有画面感

4. **发现的问题**:
   - Bug列表
   - 改进建议
   - 期望的新功能

---

**祝体验愉快！** 🎉

**下一步**: 根据体验反馈，我们将进行优化并继续集成聊天和游戏功能到统一工作台。
